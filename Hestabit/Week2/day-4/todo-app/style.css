const input = document.getElementById('todo-input');
const addBtn = document.getElementById('add-btn');
const todoList = document.getElementById('todo-list');

// 1. Load data from LocalStorage on startup
// If nothing exists, default to empty array []
let todos = JSON.parse(localStorage.getItem('todos')) || [];

// Initial render
renderTodos();

// Function to save to LocalStorage
function saveLocal() {
    localStorage.setItem('todos', JSON.stringify(todos));
}

// Function to render the list
function renderTodos() {
    todoList.innerHTML = ''; // Clear current list

    todos.forEach((todo, index) => {
        const li = document.createElement('li');
        
        // Create text span
        const span = document.createElement('span');
        span.textContent = todo;
        
        // Create buttons div
        const div = document.createElement('div');
        div.className = 'btn-group';

        // Edit Button
        const editBtn = document.createElement('button');
        editBtn.textContent = 'Edit';
        editBtn.className = 'edit-btn';
        editBtn.onclick = () => editTodo(index);

        // Delete Button
        const deleteBtn = document.createElement('button');
        deleteBtn.textContent = 'Delete';
        deleteBtn.className = 'delete-btn';
        deleteBtn.onclick = () => deleteTodo(index);

        div.appendChild(editBtn);
        div.appendChild(deleteBtn);
        li.appendChild(span);
        li.appendChild(div);
        
        todoList.appendChild(li);
    });
}

// 2. ADD Function
addBtn.addEventListener('click', () => {
    const text = input.value;
    if (text === '') return alert('Please write something!');
    
    todos.push(text); // Add to array
    saveLocal();      // Save to storage
    renderTodos();    // Update UI
    input.value = ''; // Clear input
});

// 3. DELETE Function
function deleteTodo(index) {
    todos.splice(index, 1); // Remove item at index
    saveLocal();
    renderTodos();
}

// 4. EDIT Function
function editTodo(index) {
    // Simple prompt for editing
    const newText = prompt("Update your task:", todos[index]);
    
    if (newText !== null && newText.trim() !== "") {
        todos[index] = newText;
        saveLocal();
        renderTodos();
    }
}
